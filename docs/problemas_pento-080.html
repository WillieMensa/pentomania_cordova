<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="ISO-8859-1">
	<title>PROBLEMAS PENTOMANIA</title>
	<meta name="description" content="PENTOMANIA">
	<meta name="keywords" content="Lógica, Rompecabezas, representación gráfica, Desarrollo,Sistemas de Representación,CAD 3D, dibujo tecnico,elipses,empalmes,geometria descriptiva, ingenio, proyecciones, vistas">

	<!-- version 040
			separo el codigo SVG para llamarlo donde lo necesite
	-->
</head>

<body onload="init()">

<div class="container">
	<!-- Contenido de la pagina -->
	<a name="TopOfPage"></a>

	<div>
		<h1>Impresion problemas pentomania</h1>

		<button onclick="printDiv(false)">Imprimir documento</button>

	</div>



	<div class="imprimir" id="imprimir" style="background-color:#bdf" >

    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 790 1120"
      id = "pagina">
      <style>

			@import url("https://fonts.googleapis.com/css?family=Luckiest+Guy");
			@import url("https://fonts.googleapis.com/css?family=Bangers");
			@import url("https://fonts.googleapis.com/css?family=Sriracha");

      .trazofino { fill:white; stroke:#33f;stroke-width:1;opacity:1.0; }
      .auxiliar { fill:white; stroke:#888;stroke-width:1;opacity:0.5; }
      .marco { fill:white; stroke:#566721; stroke-width:10; opacity:1.0; }

      .small { font-family: "Sriracha"; font-size: 12px; }
      .normal { font-family: "Sriracha"; font-size: 16px; }
      .valor { font-family: "Luckiest Guy"; font-size: 24px; fill:#333; font: bold; dominant-baseline: central; text-anchor: middle;}

      .title { font: bold 20px sans-serif; }
      .heavy { font-family: "Luckiest Guy"; font-size: 20px; }	<!-- fill: #888 } -->


      .imprimir{
        background: white;
        margin-right: 100px;
        margin-left: 100px;
        padding-left: 20px;
        padding-right: 20px;
        padding-top: 20px;
        max-width: 1000px;
      }
      .imprimir table{
        max-width: 960px;
      }

      </style>

      <rect width ="790" height= "1120" x="0" y="0" fill="#fff" class="trazofino"/>
      <!-- separador horizontal -->
      <line x1="0" y1="560" x2="790" y2="560" class="trazofino" transform="translate(000, 000)"/>
      <!-- separador vertical -->
      <line x1="395" y1="000" x2="395" y2="1120" class="trazofino" transform="translate(000, 000)"/>

			<!-- definicion para utilizar cuando sea necesaria -->
			<def>

				<g id="trazado" transform="translate(0,0)">
					<text
						x="195.0"
						y="68.0"
						id="txtTitulo"
						class = "heavy"
						text-anchor="middle">PENTOMANIA
					</text>

					<text x="40" y="80">
							<tspan class="normal" x="40" dx="0" dy="20">Problema Nro.</tspan>
							<tspan dx="8" dy="0" id="nroProblema" class="normal">0</tspan>
					</text>

					<!-- ahora el tablero -->
					<rect width ="330" height= "330" x="0" y="0" fill="#fff" class="marco" transform="translate(035,145)"/>


					<!-- lineas horizontales que unen vertices (lados) -->
					<line id='LH' x1="000" y1="000" x2="320" y2="000" class = "trazofino" transform="translate(040, 150)"/>
					<use href='#LH' transform="translate(000, 040)"/>
					<use href="#LH" transform="translate(000, 080)"/>
					<use href="#LH" transform="translate(000, 120)"/>
					<use href="#LH" transform="translate(000, 160)"/>
					<use href="#LH" transform="translate(000, 200)"/>
					<use href="#LH" transform="translate(000, 240)"/>
					<use href="#LH" transform="translate(000, 280)"/>
					<use href="#LH" transform="translate(000, 320)"/>


					<!-- verticales -->
					<line id='LV' x1="000" y1="000" x2="000" y2="320" class = "trazofino" transform="translate(040, 150)"/>
					<use href="#LV" transform="translate(040, 000)"/>
					<use href="#LV" transform="translate(080, 000)"/>
					<use href="#LV" transform="translate(120, 000)"/>
					<use href="#LV" transform="translate(160, 000)"/>
					<use href="#LV" transform="translate(200, 000)"/>
					<use href="#LV" transform="translate(240, 000)"/>
					<use href="#LV" transform="translate(280, 000)"/>
					<use href="#LV" transform="translate(320, 000)"/>

				</g>
			
			</def>	<!-- fin trazado tablero -->

			<def>
				<!-- modelo definicion de poliomino -->
				<g id="L" fill="#888" stroke-width="0.25" stroke="#000000" transform="translate(0,0)">
					<rect width="40" height="40" x="0"   y="0"  />
					<rect width="40" height="40" x="0"   y="40"  />
					<rect width="40" height="40" x="40"   y="40"  />
					<rect width="40" height="40" x="80"   y="40"  />
					<polygon fill="none" stroke-width="2" 
						points="0, 0
									 40,  0
									 40, 40
									120, 40
									120, 80
										0, 80
										0,  0" />

				</g>


				<g id="S" fill="#888" stroke-width="0.25" stroke="#000000"  transform="translate(200, 600)">
					<!-- [ {x:0, y:0}, {x:1, y:0}, {x:1, y:1}, {x:2, y:1} ] 
					// +-----------+
					// | 0 0,  1 0 |
					// +-----+     +-----+
					//       | 1 1,  2 1 |
					//       +-----------+
					-->
					 <rect width="40" height="40" x="0"		y="0"  />
					 <rect width="40" height="40" x="40"	y="0"  />
					 <rect width="40" height="40" x="40"	y="40"  />
					 <rect width="40" height="40" x="80"	y="40"  />
					 <polygon fill="none" stroke-width="2" 
						points=" 0, 0
										80, 0
									  80, 40
										120, 40
										120, 80
										40,80
										40,40
										0, 40
										0,  0" />
				</g>

				<g id="I" fill="#888" stroke-width="0.25" stroke="#000000"  transform="translate(300, 600)">
					<!-- 
					// +--------------------+
					// | 0 0, 1 0, 2 0, 3 0 |
					// +--------------------+
						[ {x:0, y:0}, {x:1, y:0}, {x:2, y:0}, {x:3, y:0} ]
					-->
					 <rect width="40" height="40" x="0"		y="0"  />
					 <rect width="40" height="40" x="40"	y="0"  />
					 <rect width="40" height="40" x="80"	y="0"  />
					 <rect width="40" height="40" x="120"	y="0"  />
					 <polygon fill="none" stroke-width="2" 
						points=" 0, 0
										160, 0
									  160, 40
										0, 40
										0, 0" />
				</g>

				<g id="O" fill="#888" stroke-width="0.25" stroke="#000000"  transform="translate(300, 400)">
					<!-- 
					// +----------+
					// | 0 0, 1 0 |
					// |          |
					// | 0 1, 1 1 |
					// +----------+
					//
					blockStyle: [
						[ {x:0, y:0}, {x:1, y:0}, {x:0, y:1}, {x:1, y:1} ]
					-->
					 <rect width="40" height="40" x="0"		y="0"  />
					 <rect width="40" height="40" x="40"	y="0"  />
					 <rect width="40" height="40" x="0"		y="40"  />
					 <rect width="40" height="40" x="40"	y="40"  />
					 <polygon fill="none" stroke-width="2" 
						points=" 0, 0
										80, 0
									  80, 80
										0, 80
										0, 0" />
				</g>

				<g id="T" fill="#888" stroke-width="0.25" stroke="#000000"  transform="translate(500, 400)">
					<!-- 
						//      +-----+
						//      | 0 0 |
						// +----+     +----+
						// |-1 1, 0 1, 1 1 |
						// +---------------+
							[ {x:0, y:0}, {x:-1, y:1}, {x:0, y:1}, {x:1, y:1} ]
					-->
					 <rect width="40" height="40" x="40"	y="0"  />
					 <rect width="40" height="40" x="0"		y="40"  />
					 <rect width="40" height="40" x="40"	y="40"  />
					 <rect width="40" height="40" x="80"	y="40"  />
					 <polygon fill="none" stroke-width="2" 
						points=" 40, 0
										80, 0
									  80, 40
									  120, 40
										120, 80
										0, 80
										0, 40
										40, 40
										40, 0" />
				</g>

			</def>

    </svg>

	</div>



	<!-- el proximo script contiene const problemas, array en formato json -->
	<script type="text/javascript" src="problemas.json"></script>
	<!-- <script src="polyomino4.js"></script> -->


	<!-- inicio de los scripts -->
	<script type="text/javascript">

		//	console.log(problemas);

		const	
			//	DEBUG = false;
			DEBUG = true;

		var nProblema	= 1;
		var wTetromGroup;		//	vector con datos de tetrominos. Uno va en posición fija
		var	wPolyTetrom;		//	datos para colocacion en pantalla
		var	nTetromId	= 3;	//	identificador del tetromino fijo a colocar en el tablero
		var wTetromPos = {x:2,y:2};	//	posicion del tetromino fijo



		function init() {
			if (DEBUG){
				console.log('dibujando grilla');
				DibujaGrillaA4();
			}

			GenProblema(1);

		};

		
		function recorrerObjeto(objeto)
		{
			var respuesta="";
			for (var i in objeto)
			{
				respuesta+=i+": "+objeto[i]+"<br>";
			}
			return respuesta
		}



		function DibujaGrillaA4() {
			//	dibujar grilla A4 de fondo
			const	
				ANCHO = 205, 
				ALTO = 295,
				PASO = 10;

			var svg = document.getElementById('pagina');

			//	lineas horizontales
			var i = PASO;
			while ( i<ALTO ) {
				var lElement = document.createElementNS('http://www.w3.org/2000/svg', 'line');
				lElement.setAttributeNS(null, 'x1', 0);
				lElement.setAttributeNS(null, 'y1', (i) + 'mm' );
				lElement.setAttributeNS(null, 'x2', (ANCHO) + 'mm');
				lElement.setAttributeNS(null, 'y2', (i) + 'mm' );
				lElement.setAttributeNS(null, 'class', 'auxiliar');
				svg.appendChild(lElement);			

				i += PASO;
			}

			//	lineas horizontales
			i = PASO;
			while ( i < ANCHO ) {
				var lElement = document.createElementNS('http://www.w3.org/2000/svg', 'line');
				lElement.setAttributeNS(null, 'x1', (i) + 'mm' );
				lElement.setAttributeNS(null, 'y1', 0);
				lElement.setAttributeNS(null, 'x2', (i) + 'mm' );
				lElement.setAttributeNS(null, 'y2', (ALTO) + 'mm');
				lElement.setAttributeNS(null, 'class', 'auxiliar');
				svg.appendChild(lElement);			

				i += PASO;
			}

		}


		function printDiv() {
			var objeto=document.getElementById('imprimir');
			//obtenemos el objeto a imprimir
			var ventana=window.open('','_blank');  //abrimos una ventana vacía nueva
			ventana.document.write(objeto.innerHTML);  //imprimimos el HTML del objeto en la nueva ventana
			ventana.document.close();  //cerramos el documento
			ventana.print();  //imprimimos la ventana
			ventana.close();  //cerramos la ventana
		}


	function GenProblema(nProblema) {
		//	nProblema = 1;

		var nFilaProblema = nProblema - 1;
		
		wTetromPos = { x:problemas[nFilaProblema].posX, y:problemas[nFilaProblema].posY };	//	posicion del tetromino fijo
		var str = "LSIOT";
		nTetromId	= str.indexOf(problemas[nFilaProblema].pieza);


		if (DEBUG)	{
			console.log('contenido de problemas[' + nFilaProblema + '] \n'+ 
			mostrarPropiedades(problemas[nFilaProblema], 'problemas[nFilaProblema]' ) );
			console.log('wTetromPos, nTetromId: ' +	wTetromPos.x +', ' + wTetromPos.y +', ' + nTetromId	);
		}

		var dwgProblema = document.getElementById('trazado');
		var nro = document.getElementById('nroProblema');
		var textNode = nro.childNodes[0];
		textNode.nodeValue = nProblema;
		console.log ( textNode );
		//	textNode.nodeValue = aSumaPolig[i] ;

    //	console.log(dwgProblema);
    //	svgTitulo.setAttributeNS(null, 'x', 5900);
    //	svgTitulo.setAttributeNS(null, 'y', 0);

    pagina = document.getElementById('pagina');
		pagina.appendChild(dwgProblema);
		console.log(pagina);

		//	<use id="inner-petals" href="#txtTitulo" transform="translate(000, 0)"/>

		//	wAgregatetrominoFijo( wTetromPos );
		//	agrego tetrominos
		//	var nFilaProblema = nProblema - 1;

		//	en este punto ya debe estar seleccionado el tetromino a colocar y su posicion
		//	wTetromPos = { x:problemas[nFilaProblema].posX, y:problemas[nFilaProblema].posY };	//	posicion del tetromino fijo
		var str = "LSIOT";
		console.log( problemas[nFilaProblema].pieza );
		console.log( str.indexOf(problemas[nFilaProblema].pieza));
		//	nTetromId	= str.indexOf(problemas[nFilaProblema].pieza);
		nTetromId	= problemas[nFilaProblema].pieza;
			
		var tetromino = document.getElementById( nTetromId );
		console.log(nTetromId, tetromino);

		console.log(tetromino.getAttributeNS(null, 'translate'));
		console.log(tetromino.getAttributeNS(null, 'y'));
		
		tetromino.setAttributeNS(null, 'x', 40 * problemas[nFilaProblema].posX);
		tetromino.setAttributeNS(null, 'y', 40 * problemas[nFilaProblema].posY);

		//	tetromino.style.top = 40 * problemas[nFilaProblema].posY;
		//	tetromino.translate( problemas[nFilaProblema].posX, problemas[nFilaProblema].posY);
		
		pagina.appendChild( tetromino );

		//	<use xlink:href="#V1" transform="translate(200 000)"/>
		//	const problemas = [	{	"nro" :  "1",	"pieza" : "L",	"posX" : 1,	"posY" : 7 },



	}


/*
	para crear tetrominos desde js algo similar a esto
		var polyElement_L = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
		lElement.setAttributeNS(null, 'x1', aLinePos[i][0]);
		lElement.setAttributeNS(null, 'y1', aLinePos[i][1]);
		lElement.setAttributeNS(null, 'x2', aLinePos[i][2]);
		lElement.setAttributeNS(null, 'y2', aLinePos[i][3]);
		lElement.setAttributeNS(null, 'class', 'auxiliar');
		//	console.log("lElement: " + lElement );

<!-- modelo definicion de poliomino -->
<g id="L" fill="#888" stroke-width="0.25" stroke="#000000"  transform="translate(100, 600)">
   <rect width="40" height="40" x="0"   y="0"  />
   <rect width="40" height="40" x="0"   y="40"  />
   <rect width="40" height="40" x="40"   y="40"  />
   <rect width="40" height="40" x="80"   y="40"  />
   <polygon fill="none" stroke-width="2" points=" 0, 0
                                                  0, 80
                                                 120, 80
                                                 120, 40
                                                 40, 40
                                                  40, 0
                                                  0,  0" />
</g>


		svg.appendChild(lElement);			

*/



	//-------------------------------------------------
	//	funciones exclusivas para depuracion
	//-------------------------------------------------
	function mostrarPropiedades(objeto, nombreObjeto) {
		//	https://developer.mozilla.org/es/docs/Web/JavaScript/Guide/Trabajando_con_objectos

		var resultado = "";
		for (var i in objeto) {
			//	if (objeto.hasOwnProperty(i)) {
				resultado += nombreObjeto + "." + i + " = " + objeto[i] + "\n";
			//	}
		}
		return resultado;
	}


	</script>

	<hr class="grosa">
	<!-- fin contenido -->
</div>

</body>
</html>

